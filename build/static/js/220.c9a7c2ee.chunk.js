"use strict";(self.webpackChunkmarvel_api_project=self.webpackChunkmarvel_api_project||[]).push([[220],{341:function(e,a,c){var n=c(671),r=c(466),s=c(136),t=c(516),l=c(791),i=c(850),o=c(184),h=function(e){(0,s.Z)(c,e);var a=(0,t.Z)(c);function c(){var e;(0,n.Z)(this,c);for(var r=arguments.length,s=new Array(r),t=0;t<r;t++)s[t]=arguments[t];return(e=a.call.apply(a,[this].concat(s))).state={error:!1},e}return(0,r.Z)(c,[{key:"componentDidCatch",value:function(e,a){console.log(e,a),this.setState({error:!0})}},{key:"render",value:function(){return this.state.error?(0,o.jsx)(i.Z,{}):this.props.children}}]),c}(l.Component);a.Z=h},220:function(e,a,c){c.r(a),c.d(a,{default:function(){return b}});var n=c(439),r=c(791),s=c(482),t=c(394),l=c(850),i=c(184),o=function(){var e=(0,r.useState)(null),a=(0,n.Z)(e,2),c=a[0],o=a[1],h=(0,s.Z)(),u=h.loading,d=h.error,m=h.getChar,x=h.clearError;(0,r.useEffect)((function(){j()}),[]);var j=function(){x();var e=Math.floor(400*Math.random()+1011e3);m(e).then(f).catch(d)},f=function(e){o(e)},v=function(e){var a=e.char,c=a.name,n=a.desc,r=a.thumbnail,s=a.homepage,t=a.wikipage;return(0,i.jsxs)("div",{className:"character-info",children:[(0,i.jsx)("div",{className:"character-info__img",children:r.match(/not_available/g)?(0,i.jsx)("img",{src:r,alt:"character",style:{objectFit:"contain"}}):(0,i.jsx)("img",{src:r,alt:"character"})}),(0,i.jsxs)("div",{className:"character-info__text",children:[(0,i.jsx)("h2",{className:"char-name",children:c}),(0,i.jsx)("p",{className:"char-desc",children:n.length>180?"".concat(n.substring(0,179),"..."):n}),(0,i.jsxs)("div",{className:"char-btn",children:[(0,i.jsx)("button",{className:"homepage",children:(0,i.jsx)("a",{href:s,children:"Homepage"})}),(0,i.jsx)("button",{className:"wiki",children:(0,i.jsx)("a",{href:t,children:"Wiki"})})]})]})]})},g=d?(0,i.jsx)(l.Z,{}):null,b=u?(0,i.jsx)(t.Z,{}):null,_=u||d||null===c?null:(0,i.jsx)(v,{char:c});return(0,i.jsxs)("section",{className:"character",children:[g,b,_,(0,i.jsxs)("div",{className:"character-random",children:[(0,i.jsxs)("span",{className:"random-text",children:["Your today's char!",(0,i.jsx)("br",{}),"Want to take a look at him?"]}),(0,i.jsx)("span",{className:"random-text",children:"Or you can choose another one:"}),(0,i.jsx)("button",{className:"homepage",onClick:j,children:(0,i.jsx)("a",{href:"#",children:"Try it"})})]})]})},h=c(433),u=function(e){var a=(0,r.useState)([]),c=(0,n.Z)(a,2),o=c[0],u=c[1],d=(0,r.useState)(!1),m=(0,n.Z)(d,2),x=m[0],j=m[1],f=(0,r.useState)(0),v=(0,n.Z)(f,2),g=v[0],b=v[1],_=(0,r.useState)(!1),p=(0,n.Z)(_,2),N=p[0],k=p[1],Z=(0,s.Z)(),y=Z.loading,S=Z.error,C=Z.getAllChars,w=Z._baseOffset;(0,r.useEffect)((function(){b(w),I(w,!0)}),[]);var I=function(e,a){j(!a),C(e).then(E)},E=function(e){var a=!1;e.length<9&&(a=!0),u((function(a){return[].concat((0,h.Z)(a),(0,h.Z)(e))})),j(!1),b((function(e){return e+9})),k((function(e){return a}))},F=(0,r.useRef)([]),B=function(e){F.current.forEach((function(e){return e.classList.remove("active-card")})),F.current[e].classList.add("active-card"),F.current[e].focus()},H=function(a){var c=[],n=a.map((function(n,r){return 0===a.length||c.includes(n.id)?null:(c.push(n.id),(0,i.jsxs)("div",{className:"characters-list__item",tabIndex:0,ref:function(e){return F.current[r]=e},onClick:function(a){e.onCharSelected(n.id,a),B(r)},onKeyDown:function(a){" "!==a.key&&"Enter"!==a.key||(e.onCharSelected(n.id,a),B(r))},children:[(0,i.jsx)("div",{className:"characters-list__item_img",children:n.thumbnail.match(/not_available/g)?(0,i.jsx)("img",{src:n.thumbnail,alt:"character",style:{objectFit:"contain"}}):(0,i.jsx)("img",{src:n.thumbnail,alt:"character"})}),(0,i.jsx)("h2",{className:"char-name char-name_white",children:n.name})]},n.id))}));return(0,i.jsx)(i.Fragment,{children:n})}(o),L=S?(0,i.jsx)(l.Z,{}):null,R=y&&!x?(0,i.jsx)(t.Z,{}):null;return(0,i.jsxs)("section",{className:"characters-list",children:[L,R,H,(0,i.jsx)("button",{className:"more homepage",disabled:x,style:{display:N?"none":"block"},onClick:function(){return I(g)},children:"Load more"})]})},d=c(689),m=c(87),x=function(){return(0,i.jsxs)("div",{className:"empty",children:[(0,i.jsx)("span",{className:"select__text",children:"Please select a character from the list"}),(0,i.jsx)("span",{className:"first__line"}),(0,i.jsx)("span",{className:"bold__line"}),(0,i.jsx)("span",{className:"bold__line"}),(0,i.jsx)("span",{className:"bold__line"})]})},j=function(e){var a=e.char,c=a.name,n=a.thumbnail,r=a.desc,s=a.homepage,t=a.wikipage,l=a.comics,o=a.id,h=e.onScrollBack,u=(0,d.s0)(),x=(0,d.TH)(),j=function(){u("/".concat(o)),console.log(x.pathname)},f="Comics:";return l.length<1&&(f="There's no comics for this character..."),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:"character-block",children:[(0,i.jsx)("div",{className:"character-block__img",children:n.match(/not_available/g)?(0,i.jsx)("img",{src:n,alt:c,style:{objectFit:"contain"}}):(0,i.jsx)("img",{src:n,alt:c})}),(0,i.jsxs)("div",{className:"character-block__name",children:[(0,i.jsx)("h2",{className:"char-name",children:c}),(0,i.jsxs)("div",{className:"char-btn",children:[(0,i.jsx)("button",{className:"homepage",children:(0,i.jsx)("a",{href:s,children:"Homepage"})}),(0,i.jsx)("button",{className:"wiki",children:(0,i.jsx)("a",{href:t,children:"Wiki"})})]})]})]}),(0,i.jsx)("p",{className:"char-desc",children:r}),(0,i.jsxs)("div",{className:"char-comics",children:[(0,i.jsx)("h3",{className:"char-comics__title",children:f}),(0,i.jsx)("ul",{className:"char-comics__list",children:l.map((function(e,a){var c=e.resourceURI.match(/\d\w+/)[0];if(!(a>=10))return(0,i.jsx)("li",{className:"char-comics__list_item",children:(0,i.jsx)(m.rU,{style:{color:"#000"},to:"/comics/".concat(c),onClick:function(){return j()},children:e.name})},e.resourceURI)}))}),(0,i.jsx)("button",{className:"down__btn",onClick:h,children:"Go back to hero select"})]})]})},f=function(e){var a=(0,r.useState)(null),c=(0,n.Z)(a,2),o=c[0],h=c[1],u=(0,s.Z)(),d=u.loading,m=u.error,f=u.getChar,v=u.clearError;(0,r.useEffect)((function(){g()}),[e.charId]);var g=function(){var a=e.charId;a&&(v(),f(a).then(b))},b=function(e){h(e)},_="",p=o||d||m?null:(0,i.jsx)(x,{}),N=m?(0,i.jsx)(l.Z,{}):null,k=d?(0,i.jsx)(t.Z,{}):null,Z=d||m||!o?null:(0,i.jsx)(j,{char:o,onScrollBack:e.onScrollBack});return _=o||d||m?"100%":"300px",(0,i.jsxs)("section",{className:"character-sidebar",style:{height:"".concat(_)},children:[p,N,k,Z]})},v=c(341);var g=c.p+"static/media/bg_chars.29bcc336f77f1faf051e8337155ad6da.svg",b=function(){var e=(0,r.useState)(null),a=(0,n.Z)(e,2),c=a[0],s=a[1],t=(0,r.useState)({}),l=(0,n.Z)(t,2),h=l[0],d=l[1];return(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)("div",{className:"bg__art",style:{backgroundImage:'url("'.concat(g,'")')},children:[(0,i.jsx)(v.Z,{children:(0,i.jsx)(o,{})}),(0,i.jsxs)("main",{className:"main",children:[(0,i.jsx)(v.Z,{children:(0,i.jsx)(u,{onCharSelected:function(e,a){s(e),d(a.target);var c=document.querySelector(".character-sidebar");window.scrollY>400&&c.scrollIntoView({behavior:"smooth"})}})}),(0,i.jsx)(v.Z,{children:(0,i.jsx)(f,{charId:c,onScrollBack:function(){h.scrollIntoView({behavior:"smooth"})}})})]})]})})}}}]);
//# sourceMappingURL=220.c9a7c2ee.chunk.js.map